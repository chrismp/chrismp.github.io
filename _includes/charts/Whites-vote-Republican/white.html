<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">

	<title>U.S. presidential vote, 1972-2016, by race</title>

	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
	<link href="css/c3.min.css" rel="stylesheet">
	<style type="text/css">
		.c3-chart-arcs-title {
			font-size: 2.5rem;
		}

		.c3-chart-arc text {
			font-weight: bold;
			font-size: 1rem;
		}
	</style>


	<script src="https://d3js.org/d3.v5.min.js"></script>
	<script src="js/c3.min.js"></script>

	<script type="text/javascript">
		var dataDir = "vote-by-race";
		d3.csv(dataDir+"/white.csv").then(function(data){
			var row;
			data.forEach(function(d,i){
				if (i%3===0) {
					row = document.createElement("div");
					row.className = "row";
				}

				var col = document.createElement("div");
				col.className = "col-sm";

				var chartDiv = document.createElement("div");
				chartDiv.id = "chart"+i;

				col.appendChild(chartDiv);
				row.appendChild(col);
				document.getElementById("charts").appendChild(row);

				var chartDataObj = Object.assign({},d);
				delete chartDataObj["Year"];
				var chart = c3.generate({
					data: {
						json: chartDataObj,
						type: "donut",
						colors: {
							Democrat: "#2166ac",
							Republican: "#b2182b",
							Other: "#bbb"
						}
					},
					tooltip: {
						show: false
					},
					legend: {
						show: false
					},
					donut: {
						title: d["Year"],
						label: {
							format: function(value,ratio,id){
								return d3.format('.0%')(value/100);
							}
						}
					},
					bindto: '#'+chartDiv.id
				});
			});
		});
	</script>
</head>
<body>
	<div id="charts" class="container"></div>
</body>
</html>